<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://sitodo-example.herokuapp.com/bootcamp/day-1/hello-tdd/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Hello, TDD - Sitodo</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Hello, TDD";
        var mkdocs_page_input_path = "bootcamp\\day-1\\hello-tdd.md";
        var mkdocs_page_url = "/bootcamp/day-1/hello-tdd/";
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Sitodo
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../..">Course Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Day One</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../init-spring/">Initialise Project</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Hello, TDD</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#my-first-test-case">My First Test Case</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pass-the-first-test">Pass the First Test</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#test-in-a-mock-environment">Test in a Mock Environment</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../qa-automation/">Deployment Automation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basic-list/">Create a Basic Todo List</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../end-day-1/">Recap</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Day Two</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../day-2/test-automation/">Test Automation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../day-2/update-data-model/">One of Many Lists</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Sitodo</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Day One &raquo;</li>
      <li>Hello, TDD</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="hello-test-driven-development">Hello, Test-Driven Development</h1>
<p>Let us start by creating a controller class named <code>HelloController</code> in <code>src/main/java</code> directory,
specifically under the package that was initialised by Spring Initialzr:</p>
<pre><code class="language-java">import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class HelloController {

    @GetMapping(&quot;/hello&quot;)
    public String showHello() {
        return &quot;&quot;;
    }
}
</code></pre>
<p>We left the implementation empty for now.
This is called as stubbing or creating an empty implementation. 
If the return value of a method in a controller class is a string,
then the framework expects the return value contains the name of a Web page template.</p>
<p>Notice there are two directories in <code>src</code> directory: <code>main</code> and <code>test</code>.
The <code>main</code> directory contains the actual code for implementing the application.
We often call the actual code as the <strong>production code</strong>.
In contrast, the <code>test</code> directory contains the code for testing the application.
It is also known as the <strong>test code</strong>.</p>
<h2 id="my-first-test-case">My First Test Case</h2>
<p>Create a new class named <code>HelloControllerTest</code> in <code>controller</code> package of the test code.
The class will contain one or more instance methods that will execute the test cases.
Let us start with a test case that verifies <code>showHello</code> method uses a Web page template named <code>hello</code>.
Create a method named <code>showHello_ok</code> in <code>HelloControllerTest</code>:</p>
<pre><code class="language-java">import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

public class HelloControllerTest {

    @Test
    void showHello_ok() {
        // [Setup]
        HelloController helloController = new HelloController();

        // [Exercise]
        String result = helloController.showHello();

        // [Verify]
        assertEquals(&quot;hello&quot;, result);

        // [Teardown]
        // Do nothing
    }
}
</code></pre>
<p>The method that implements a test case can be structured into four sections:
<strong>Setup</strong>, <strong>Exercise</strong>, <strong>Verify</strong>, and <strong>Teardown</strong> sections.
<strong>Setup</strong> is used to initialise the test environment (e.g. the object to be tested, sample data, load test case input).
<strong>Exercise</strong>, as its name implies, executes the procedures that invoke the production code that are being tested.
<strong>Verify</strong> contains procedures that verify the result from the <strong>Exercise</strong>.
<strong>Teardown</strong> usually contains procedures to clean up the test environment.</p>
<p>Run the test suite via the shortcut in the editor or use Maven command <code>mvnw test</code>.
If you implement the method exactly as written in this document, the test case execution will fail.
That is the way how test-driven development is conducted.
We always (or, strive to) start with writing a test case that initially fails.</p>
<h2 id="pass-the-first-test">Pass the First Test</h2>
<p>According to the first test case, it expects the controller to use a Web page template (or often called as "view") named <code>hello</code> to generate the HTML response.
Therefore, if you want to make the test pass, you need to make an HTML view with the same name.
Now, create a new HTML view in <code>templates</code> directory.
The content can be empty, since we only want to make the test pass.
But at least, write something in the HTML such as a "Hello, World" message.</p>
<p>At this point, we can verify that the controller works fine as an independent unit.
The implementation of <code>showHello</code> returns the correct string value as we expected.
However, we still do not know if <code>showHello</code> will behave as intended when it has to handle an actual HTTP request.
This is where we are going to test the implementation in a mock/simulated environment.</p>
<h2 id="test-in-a-mock-environment">Test in a Mock Environment</h2>
<p>We know that <code>showHello</code> is an HTTP request handler implemented in a controller.
If we want to actually verify if the implementation is correct,
we can test the implementation in a simulated Web server.</p>
<p>Go back to the test code and update <code>HelloControllerTest</code> class with the following code snippet:</p>
<pre><code class="language-java">// New imports
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import static java.nio.charset.StandardCharsets.UTF_8;
import static org.springframework.http.MediaType.TEXT_HTML;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;

// New annotation
@WebMvcTest(HelloController.class)
class HelloControllerTest {

    // New instance variable
    @Autowired
    private MockMvc mockMvc;

    @Test
    void showHello_ok() {
        // Omitted for brevity
    } 

    @Test
    void showHello_okResponse() throws Exception {
        mockMvc.perform(get(&quot;/hello&quot;)).andExpectAll(
            status().isOk(),
            content().contentTypeCompatibleWith(TEXT_HTML),
            content().encoding(UTF_8),
            view().name(&quot;hello&quot;)
        );
    }
}
</code></pre>
<p>The addition of <code>@WebMvcTest</code> annotation will make the test suite
to be executed by a test runner provided by Spring framework.
It will build and run the production code in a simulated Web server.
Hence, it is possible for the test cases to run against a running application.</p>
<p>For example, the new test case above will use an instance of <code>MockMvc</code>,
which automatically injected by the Spring framework during runtime,
to send an HTTP GET request to <code>/hello</code> path in the application.
Then, we try to verify the HTTP response given by the application.</p>
<p>Try to run the test suite again, either via the shortcut in the IDE or <code>mvnw test</code> command in the shell.
You will see that the test suite does not run instantly as they previously did.
The test runner now runs the production code on a simulated server before executing the test cases.
Once you have verified all test cases pass, save your work as a new Git commit and push it to GitHub:</p>
<pre><code class="language-shell"># Track all changes in both production and test codes
git add src/test/java
git add src/main/java

# And commit the changes into a single commit 
git commit
</code></pre>
<p>You have gone through a single TDD cycle.
It starts with writing a test, followed by the implementation to make the test pass.
We have not covered refactoring in a TDD cycle since the production code is still quite simple.</p>
<p>In the next section, you will deploy the app to a Platform-as-a-Service provider and learn how to automate the deployment process.
You will also see how to ensure that the test suite is always executed whenever you pushed commits to GitHub.
Make sure you have created an account on <a href="https://www.heroku.com">Heroku</a> before continuing to the next section.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../init-spring/" class="btn btn-neutral float-left" title="Initialise Project"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../qa-automation/" class="btn btn-neutral float-right" title="Deployment Automation">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../init-spring/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../qa-automation/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
